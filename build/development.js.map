{"version":3,"file":"development.js","sources":["../src/main.js"],"sourcesContent":["const intro = new Audio(\"https://alex-leeds--statuesque-rugelach-4185bd.netlify.app/assets/audio/intro.mp3\");\r\n\r\nAFRAME.registerComponent(\"leeds-world-mover\", {\r\n  init: function () {\r\n    this.moving = false;\r\n    this.destinations = [];\r\n    this.currentDestination = 0;\r\n    this.direction = new THREE.Vector3(0, 0, 0);\r\n    this.speed = 1;\r\n    this.lastCheck = 0;\r\n\r\n    // Register Waypoints\r\n    for (let i = 0; i <= 100; i++) {\r\n      const waypoint = document.querySelector(\".waypoint-\" + i);\r\n\r\n      if (waypoint) {\r\n        this.destinations.push(waypoint.object3D.position.negate());\r\n      }\r\n    }\r\n\r\n    // Networked Events\r\n    this.el.sceneEl.addEventListener(\"startMovingWorld\", this._start.bind(this));\r\n    this.el.sceneEl.addEventListener(\"stopMovingWorld\", this._stop.bind(this));\r\n\r\n    NAF.connection.subscribeToDataChannel(\"startMovingWorld\", this.start.bind(this));\r\n    NAF.connection.subscribeToDataChannel(\"stopMovingWorld\", this.stop.bind(this));\r\n\r\n    // Load Model\r\n    window.APP.utils.GLTFModelPlus\r\n      .loadModel(\"https://alex-leeds--statuesque-rugelach-4185bd.netlify.app/assets/environment-11.8.glb\")\r\n      .then((model) => {\r\n        this.el.setObject3D(\"mesh\", window.APP.utils.cloneObject3D(model.scene));\r\n        this.el.setAttribute(\"animation__worldshrink\", {\r\n          property: \"scale\",\r\n          from: \"0.01 0.01 0.01\",\r\n          to: \"1 1 1\",\r\n          dur: 10000,\r\n          startEvents: 'startworldshrink'\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n      });\r\n  },\r\n\r\n  remove: function () {\r\n    this.el.sceneEl.removeEventListener(\"startMovingWorld\", this._start.bind(this));\r\n    this.el.sceneEl.removeEventListener(\"stopMovingWorld\", this._stop.bind(this));\r\n  },\r\n\r\n  tick: function (time, delta) {\r\n    if (this.moving) {\r\n      const target = this.destinations[this.currentDestination];\r\n\r\n      if (!intro.playedAudio && this.currentDestination === 0) {\r\n        intro.playedAudio = true;\r\n        intro.play();\r\n      }\r\n\r\n      if (target) {\r\n        this.direction.copy(target).sub(this.el.object3D.position);\r\n\r\n        if (this.el.object3D.position.distanceToSquared(target) >= 1) {\r\n          this.direction.multiplyScalar(this.speed / this.direction.length() * (delta / 1000));\r\n\r\n          this.el.setAttribute(\"position\", {\r\n            x: this.el.object3D.position.x + this.direction.x,\r\n            y: this.el.object3D.position.y + this.direction.y,\r\n            z: this.el.object3D.position.z + this.direction.z,\r\n          });\r\n        } else {          \r\n          if (isNaN(this.lastCheck) || time >= this.lastCheck) {\r\n            this.lastCheck = time + 100;\r\n            this.currentDestination = this.currentDestination + 1;\r\n          }\r\n        }\r\n      } else {\r\n        this.moving = false;\r\n      }\r\n    }\r\n  },\r\n\r\n  start: function () {\r\n    this.moving = true;\r\n  },\r\n\r\n  stop: function () {\r\n    this.moving = false;\r\n  },\r\n\r\n  _start: function () {\r\n    this.start(null, null, {});\r\n    NAF.connection.broadcastDataGuaranteed(\"startMovingWorld\", {});\r\n  },\r\n\r\n  _stop: function () {\r\n    this.stop(null, null, {});\r\n    NAF.connection.broadcastDataGuaranteed(\"stopMovingWorld\", {});\r\n  }\r\n});\r\n\r\nAFRAME.registerComponent(\"leeds-button\", {\r\n  init: function () {\r\n    this.geometry = new THREE.SphereGeometry(0.2, 16, 8);\r\n    this.material = new THREE.MeshBasicMaterial({ color: 0xffffff });\r\n    this.mesh = new THREE.Mesh(this.geometry, this.material);\r\n\r\n    this.el.setObject3D(\"mesh\", this.mesh);\r\n    this.el.setAttribute(\"tags\", { singleActionButton: true });\r\n    this.el.setAttribute(\"is-remote-hover-target\", \"\");\r\n    this.el.setAttribute(\"hoverable-visuals\", \"\");\r\n    this.el.classList.add(\"interactable\");\r\n\r\n    this.onClick = this.onClick.bind(this);\r\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\r\n  },\r\n\r\n  remove: function () {\r\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\r\n  },\r\n\r\n  onClick: function () {\r\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(18);\r\n    document.querySelector(\"#leedsworld\").emit(\"startworldshrink\", null, false);\r\n    this.el.sceneEl.emit(\"startMovingWorld\");\r\n    this.el.sceneEl.removeChild(this.el);\r\n  }\r\n});\r\n\r\nAPP.scene.addEventListener(\"environment-scene-loaded\", () => {\r\n  const world = document.createElement(\"a-entity\");\r\n  world.id = \"leedsworld\";\r\n  world.setAttribute(\"leeds-world-mover\", \"\");\r\n  world.object3D.scale.set(0.01, 0.01, 0.01);\r\n  window.APP.scene.appendChild(world);\r\n\r\n  const button = document.createElement(\"a-entity\");\r\n  button.setAttribute(\"leeds-button\", \"\");\r\n  button.object3D.position.set(0, 2, 0);\r\n\r\n  window.APP.scene.appendChild(button);\r\n}, { once: true });"],"names":[],"mappings":"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"}