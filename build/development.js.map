{"version":3,"file":"development.js","sources":["../src/components/speech.js","../src/main.js"],"sourcesContent":["const MIC_PRESENCE_VOLUME_THRESHOLD = 0.00001;\r\n\r\nconst SPEECH_TIME_PER_TICK = 10; // every speech tick = 10ms of realtime\r\nconst MIN_SPEECH_TIME_FOR_EVENT = 100; // 0.1s realtime\r\nconst MAX_SPEECH_TIME_FOR_EVENT = 5000; // 5s realtime\r\nconst CONTINUOUS_SPEECH_LENIENCY_TIME = 100; // 0.1s realtime\r\n\r\nconst ORB_CONTAINER_POS = [0, 0, 0]; // [7,0,2]\r\nconst ORB_CONTAINER_SIZE = 1;\r\nconst ORB_CONTAINER_DEPTH = 4;\r\n\r\nconst MIN_ORB_SIZE = 0.05;\r\nconst MAX_ORB_SIZE = 0.9;\r\nconst SPEECH_ORB_LIFETIME = 1000 * 60 * 5; // 5mins realtime\r\nconst ORB_GROWTH_PER_TICK = (MAX_ORB_SIZE - MIN_ORB_SIZE) / ((MAX_SPEECH_TIME_FOR_EVENT - MIN_SPEECH_TIME_FOR_EVENT) / SPEECH_TIME_PER_TICK);\r\n\r\nAFRAME.registerComponent(\"socialvr-speech\", {\r\n  init() {\r\n    this.localAudioAnalyser = this.el.sceneEl.systems[\"local-audio-analyser\"];\r\n    this.playerInfo = APP.componentRegistry[\"player-info\"][0];\r\n\r\n    this.activeSpeechOrbs = {};\r\n    this.continuousSpeechTime = 0;\r\n    this.continuousSpeechLeniencyTime = 0;\r\n\r\n    NAF.connection.subscribeToDataChannel(\"startSpeechEvent\", this.startSpeech.bind(this));\r\n    NAF.connection.subscribeToDataChannel(\"stopSpeechEvent\", this.stopSpeech.bind(this));\r\n\r\n    console.log(\"[Social VR] Speech System - Initialized\");\r\n  },\r\n\r\n  remove() {\r\n    NAF.connection.unsubscribeToDataChannel(\"startSpeechEvent\");\r\n    NAF.connection.unsubscribeToDataChannel(\"stopSpeechEvent\");\r\n  },\r\n\r\n  tick(t, dt) {\r\n    const muted = this.playerInfo.data.muted;\r\n    const speaking = !muted && this.localAudioAnalyser.volume > MIC_PRESENCE_VOLUME_THRESHOLD;\r\n  \r\n    // maintain speech event state of local user, send events as needed\r\n    if (speaking) {\r\n      if (this.continuousSpeechTime === 0) {\r\n        // speech event started\r\n        const eventData = { speaker: this.playerInfo.playerSessionId, speakerName: this.playerInfo.displayName };\r\n        this.startSpeech(null, null, eventData, null); // local\r\n        NAF.connection.broadcastData(\"startSpeechEvent\", eventData); // networked\r\n      }\r\n      this.continuousSpeechTime += SPEECH_TIME_PER_TICK;\r\n      this.continuousSpeechLeniencyTime = CONTINUOUS_SPEECH_LENIENCY_TIME;\r\n      // if this is a single really long speech event, break it off and start a new one\r\n      if (this.continuousSpeechTime >= MAX_SPEECH_TIME_FOR_EVENT) {\r\n        this.doStopSpeech(this.continuousSpeechTime);\r\n        this.continuousSpeechTime = 0;\r\n      }\r\n    } else {\r\n      if (this.continuousSpeechLeniencyTime > 0) {\r\n        this.continuousSpeechLeniencyTime -= SPEECH_TIME_PER_TICK;\r\n      }\r\n      if (this.continuousSpeechLeniencyTime <= 0 && this.continuousSpeechTime >= MIN_SPEECH_TIME_FOR_EVENT) {\r\n        // speech event ended\r\n        this.doStopSpeech(this.continuousSpeechTime);\r\n        this.continuousSpeechTime = 0;\r\n      }\r\n    }\r\n  \r\n    // update speech orb sizes and positions\r\n    for (const finishedOrb of document.querySelectorAll(\".speechOrb.finished\")) {\r\n      const pos = finishedOrb.getAttribute(\"position\");\r\n      pos.y += ORB_GROWTH_PER_TICK; // synchronize movement speed with orb growth rate\r\n      finishedOrb.setAttribute(\"position\", pos);\r\n    }\r\n\r\n    for (const activeOrb of Object.values(this.activeSpeechOrbs)) {\r\n      // grow each active speech orb by ORB_GROWTH_PER_TICK\r\n      const size = parseFloat(activeOrb.getAttribute(\"height\")) + ORB_GROWTH_PER_TICK;\r\n      activeOrb.setAttribute(\"height\", size);\r\n      activeOrb.setAttribute(\"radius\", 0.1);\r\n  \r\n      // move its center upward by half of the growth amount,\r\n      // to keep the bottom position fixed at the \"now\" plane\r\n      const pos = activeOrb.getAttribute(\"position\");\r\n      pos.y += ORB_GROWTH_PER_TICK / 2;\r\n      activeOrb.setAttribute(\"position\", pos);\r\n    }\r\n  },\r\n\r\n  startSpeech(senderId, dataType, data, targetId) { \r\n    // if no already-active speech orb for this speaker, spawn one\r\n    const activeOrb = this.activeSpeechOrbs[data.speaker];\r\n    if (activeOrb) {\r\n      activeOrb.classList.add(\"finished\"); // FIXME replace w/ stopSpeech call for consistency?\r\n    }\r\n    const speakerInfo = this.getPlayerInfo(data.speaker);\r\n    const newOrb = this.spawnOrb(MIN_ORB_SIZE, this.playerInfoToColor(speakerInfo));\r\n    this.activeSpeechOrbs[data.speaker] = newOrb;\r\n  \r\n    // position the orb relative to the player and the center of the scene\r\n    const centerObj = this.el;\r\n    const centerPos = centerObj ? centerObj.object3D.position.clone() : new THREE.Vector3(...ORB_CONTAINER_POS);\r\n    centerPos.y = 1.5;\r\n    const playerPos = speakerInfo.el.object3D.position.clone();\r\n    playerPos.y = 1.5;\r\n    const offset = new THREE.Vector3().subVectors(playerPos, centerPos).normalize();\r\n    const orbPos = new THREE.Vector3().addVectors(centerPos, offset);\r\n\r\n    newOrb.object3D.position.copy(orbPos);\r\n  },\r\n\r\n  doStopSpeech(speechTime) {\r\n    const orbSize = this.scale(speechTime, MIN_SPEECH_TIME_FOR_EVENT, MAX_SPEECH_TIME_FOR_EVENT, MIN_ORB_SIZE, MAX_ORB_SIZE);\r\n    const eventData = {\r\n      size: orbSize,\r\n      speaker: this.playerInfo.playerSessionId,\r\n      speakerName: this.playerInfo.displayName\r\n    };\r\n    this.stopSpeech(null, null, eventData, null); // local\r\n    NAF.connection.broadcastData(\"stopSpeechEvent\", eventData); // networked\r\n  },\r\n\r\n  stopSpeech(senderId, dataType, data, targetId) {\r\n    const activeOrb = this.activeSpeechOrbs[data.speaker];\r\n    if (activeOrb) {\r\n      activeOrb.classList.add(\"finished\");\r\n      activeOrb.setAttribute(\"radius\", 0.1);\r\n      activeOrb.setAttribute(\"height\", data.size);\r\n\r\n      delete this.activeSpeechOrbs[data.speaker];\r\n    }\r\n  },\r\n\r\n  scale(num, oldLower, oldUpper, newLower, newUpper) {\r\n    const oldRange = oldUpper - oldLower;\r\n    const newRange = newUpper - newLower;\r\n    return ((num - oldLower) / oldRange) * newRange + newLower;\r\n  },\r\n\r\n  getPlayerInfo(sessionID) {\r\n    const playerInfos = APP.componentRegistry[\"player-info\"];\r\n    return playerInfos.find(pi => pi.playerSessionId === sessionID);\r\n  },\r\n\r\n  sessionIDToColor(sessionID) {\r\n    return \"#\" + sessionID.substring(0, 6); // just use first 6 chars lol\r\n  },\r\n  \r\n  playerInfoToColor(playerInfo) {\r\n    // keys are \"Avatar listing sid\"s from Approved Avatars admin tab\r\n    const colorsByAvatar = {\r\n      WUvZgGK: \"lightskyblue\",\r\n      qpOOt9I: \"hotpink\",\r\n      \"2s2UuzN\": \"red\",\r\n      wAUg76e: \"limegreen\",\r\n      RczWQgy: \"#222\",\r\n      xb4PVBE: \"yellow\",\r\n      yw4c83R: \"purple\",\r\n      \"4r1KpVk\": \"orange\",\r\n      bs7pLac: \"darkblue\"\r\n    };\r\n    const avatarURL = playerInfo.data.avatarSrc;\r\n    for (const avatarSID of Object.keys(colorsByAvatar)) {\r\n      if (avatarURL.includes(avatarSID)) return colorsByAvatar[avatarSID];\r\n    }\r\n    return this.sessionIDToColor(playerInfo.playerSessionId);\r\n  },\r\n\r\n  spawnOrb(size, color) {\r\n    color = color || \"yellow\";\r\n  \r\n    // create, color, position, and scale the orb\r\n    const orb = document.createElement(\"a-cylinder\");\r\n    orb.classList.add(\"speechOrb\");\r\n    orb.setAttribute(\"segments-height\", 1);\r\n    orb.setAttribute(\"segments-radial\", 6);\r\n    orb.setAttribute(\"radius\", 1);\r\n    orb.setAttribute(\"height\", size);\r\n    orb.setAttribute(\"color\", color);\r\n  \r\n    // add the orb to the scene\r\n    this.el.sceneEl.appendChild(orb);\r\n  \r\n    // queue the orb for deletion later\r\n    setTimeout(() => orb.remove(), SPEECH_ORB_LIFETIME);\r\n  \r\n    return orb;\r\n  }\r\n});","///////////\r\n// BARGE //\r\n///////////\r\n\r\n// import \"./components/toolbox-button\";\r\n// import \"./components/barge\";\r\n// import \"./components/barge-button\";\r\n\r\n// import \"./systems/barge\";\r\n// import { CreateBarge } from \"./systems/barge\";\r\n\r\n// console.log(\"[Social VR] Barge - Create Barge\");\r\n// const [barge, bargeToolboxButton] = CreateBarge();\r\n// scene.appendChild(barge);\r\n// scene.appendChild(bargeToolboxButton);\r\n\r\n// window.startPhaseTesting = function() {\r\n//   let phase = 1;\r\n//   barge.emit(\"advancePhaseEvent\");\r\n//   console.log(`[Social VR] Barge - Current Phase: ${phase}`);\r\n// };\r\n\r\n\r\n////////////////////////////////////\r\n// SPEECH entity-component-system //\r\n////////////////////////////////////\r\n\r\nimport \"./components/speech\";\r\n\r\nconst scene = document.querySelector(\"a-scene\");\r\n\r\nconst speechVisEl = document.createElement(\"a-cylinder\");\r\nspeechVisEl.setAttribute(\"color\", \"blue\");\r\nspeechVisEl.setAttribute(\"height\", \"0.2\");\r\nspeechVisEl.setAttribute(\"radius\", \"1\");\r\nspeechVisEl.setAttribute(\"position\", {\r\n  x: 5,\r\n  y: 1,\r\n  z: 0\r\n});\r\nspeechVisEl.setAttribute(\"socialvr-speech\", \"\")\r\n\r\nscene.appendChild(speechVisEl);\r\n"],"names":[],"mappings":";;;EAAA,MAAM,6BAA6B,GAAG,OAAO,CAAC;AAC9C;EACA,MAAM,oBAAoB,GAAG,EAAE,CAAC;EAChC,MAAM,yBAAyB,GAAG,GAAG,CAAC;EACtC,MAAM,yBAAyB,GAAG,IAAI,CAAC;EACvC,MAAM,+BAA+B,GAAG,GAAG,CAAC;AAC5C;EACA,MAAM,iBAAiB,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAGpC;EACA,MAAM,YAAY,GAAG,IAAI,CAAC;EAC1B,MAAM,YAAY,GAAG,GAAG,CAAC;EACzB,MAAM,mBAAmB,GAAG,IAAI,GAAG,EAAE,GAAG,CAAC,CAAC;EAC1C,MAAM,mBAAmB,GAAG,CAAC,YAAY,GAAG,YAAY,KAAK,CAAC,yBAAyB,GAAG,yBAAyB,IAAI,oBAAoB,CAAC,CAAC;AAC7I;EACA,MAAM,CAAC,iBAAiB,CAAC,iBAAiB,EAAE;EAC5C,EAAE,IAAI,GAAG;EACT,IAAI,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC;EAC9E,IAAI,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9D;EACA,IAAI,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;EAC/B,IAAI,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;EAClC,IAAI,IAAI,CAAC,4BAA4B,GAAG,CAAC,CAAC;AAC1C;EACA,IAAI,GAAG,CAAC,UAAU,CAAC,sBAAsB,CAAC,kBAAkB,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;EAC3F,IAAI,GAAG,CAAC,UAAU,CAAC,sBAAsB,CAAC,iBAAiB,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACzF;EACA,IAAI,OAAO,CAAC,GAAG,CAAC,yCAAyC,CAAC,CAAC;EAC3D,GAAG;AACH;EACA,EAAE,MAAM,GAAG;EACX,IAAI,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,kBAAkB,CAAC,CAAC;EAChE,IAAI,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,iBAAiB,CAAC,CAAC;EAC/D,GAAG;AACH;EACA,EAAE,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE;EACd,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC;EAC7C,IAAI,MAAM,QAAQ,GAAG,CAAC,KAAK,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,6BAA6B,CAAC;EAC9F;EACA;EACA,IAAI,IAAI,QAAQ,EAAE;EAClB,MAAM,IAAI,IAAI,CAAC,oBAAoB,KAAK,CAAC,EAAE;EAC3C;EACA,QAAQ,MAAM,SAAS,GAAG,EAAE,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,eAAe,EAAE,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;EACjH,QAAQ,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;EACtD,QAAQ,GAAG,CAAC,UAAU,CAAC,aAAa,CAAC,kBAAkB,EAAE,SAAS,CAAC,CAAC;EACpE,OAAO;EACP,MAAM,IAAI,CAAC,oBAAoB,IAAI,oBAAoB,CAAC;EACxD,MAAM,IAAI,CAAC,4BAA4B,GAAG,+BAA+B,CAAC;EAC1E;EACA,MAAM,IAAI,IAAI,CAAC,oBAAoB,IAAI,yBAAyB,EAAE;EAClE,QAAQ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;EACrD,QAAQ,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;EACtC,OAAO;EACP,KAAK,MAAM;EACX,MAAM,IAAI,IAAI,CAAC,4BAA4B,GAAG,CAAC,EAAE;EACjD,QAAQ,IAAI,CAAC,4BAA4B,IAAI,oBAAoB,CAAC;EAClE,OAAO;EACP,MAAM,IAAI,IAAI,CAAC,4BAA4B,IAAI,CAAC,IAAI,IAAI,CAAC,oBAAoB,IAAI,yBAAyB,EAAE;EAC5G;EACA,QAAQ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;EACrD,QAAQ,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;EACtC,OAAO;EACP,KAAK;EACL;EACA;EACA,IAAI,KAAK,MAAM,WAAW,IAAI,QAAQ,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,EAAE;EAChF,MAAM,MAAM,GAAG,GAAG,WAAW,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;EACvD,MAAM,GAAG,CAAC,CAAC,IAAI,mBAAmB,CAAC;EACnC,MAAM,WAAW,CAAC,YAAY,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;EAChD,KAAK;AACL;EACA,IAAI,KAAK,MAAM,SAAS,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAE;EAClE;EACA,MAAM,MAAM,IAAI,GAAG,UAAU,CAAC,SAAS,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,GAAG,mBAAmB,CAAC;EACtF,MAAM,SAAS,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;EAC7C,MAAM,SAAS,CAAC,YAAY,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;EAC5C;EACA;EACA;EACA,MAAM,MAAM,GAAG,GAAG,SAAS,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;EACrD,MAAM,GAAG,CAAC,CAAC,IAAI,mBAAmB,GAAG,CAAC,CAAC;EACvC,MAAM,SAAS,CAAC,YAAY,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;EAC9C,KAAK;EACL,GAAG;AACH;EACA,EAAE,WAAW,CAAC,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE;EAClD;EACA,IAAI,MAAM,SAAS,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;EAC1D,IAAI,IAAI,SAAS,EAAE;EACnB,MAAM,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;EAC1C,KAAK;EACL,IAAI,MAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;EACzD,IAAI,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC,CAAC;EACpF,IAAI,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC;EACjD;EACA;EACA,IAAI,MAAM,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC;EAC9B,IAAI,MAAM,SAAS,GAAG,SAAS,GAAG,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,EAAE,GAAG,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,iBAAiB,CAAC,CAAC;EAChH,IAAI,SAAS,CAAC,CAAC,GAAG,GAAG,CAAC;EACtB,IAAI,MAAM,SAAS,GAAG,WAAW,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;EAC/D,IAAI,SAAS,CAAC,CAAC,GAAG,GAAG,CAAC;EACtB,IAAI,MAAM,MAAM,GAAG,IAAI,KAAK,CAAC,OAAO,EAAE,CAAC,UAAU,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,SAAS,EAAE,CAAC;EACpF,IAAI,MAAM,MAAM,GAAG,IAAI,KAAK,CAAC,OAAO,EAAE,CAAC,UAAU,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;AACrE;EACA,IAAI,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;EAC1C,GAAG;AACH;EACA,EAAE,YAAY,CAAC,UAAU,EAAE;EAC3B,IAAI,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,yBAAyB,EAAE,yBAAyB,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC;EAC7H,IAAI,MAAM,SAAS,GAAG;EACtB,MAAM,IAAI,EAAE,OAAO;EACnB,MAAM,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,eAAe;EAC9C,MAAM,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,WAAW;EAC9C,KAAK,CAAC;EACN,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;EACjD,IAAI,GAAG,CAAC,UAAU,CAAC,aAAa,CAAC,iBAAiB,EAAE,SAAS,CAAC,CAAC;EAC/D,GAAG;AACH;EACA,EAAE,UAAU,CAAC,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE;EACjD,IAAI,MAAM,SAAS,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;EAC1D,IAAI,IAAI,SAAS,EAAE;EACnB,MAAM,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;EAC1C,MAAM,SAAS,CAAC,YAAY,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;EAC5C,MAAM,SAAS,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;AAClD;EACA,MAAM,OAAO,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;EACjD,KAAK;EACL,GAAG;AACH;EACA,EAAE,KAAK,CAAC,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE;EACrD,IAAI,MAAM,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC;EACzC,IAAI,MAAM,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC;EACzC,IAAI,OAAO,CAAC,CAAC,GAAG,GAAG,QAAQ,IAAI,QAAQ,IAAI,QAAQ,GAAG,QAAQ,CAAC;EAC/D,GAAG;AACH;EACA,EAAE,aAAa,CAAC,SAAS,EAAE;EAC3B,IAAI,MAAM,WAAW,GAAG,GAAG,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC;EAC7D,IAAI,OAAO,WAAW,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,eAAe,KAAK,SAAS,CAAC,CAAC;EACpE,GAAG;AACH;EACA,EAAE,gBAAgB,CAAC,SAAS,EAAE;EAC9B,IAAI,OAAO,GAAG,GAAG,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAC3C,GAAG;EACH;EACA,EAAE,iBAAiB,CAAC,UAAU,EAAE;EAChC;EACA,IAAI,MAAM,cAAc,GAAG;EAC3B,MAAM,OAAO,EAAE,cAAc;EAC7B,MAAM,OAAO,EAAE,SAAS;EACxB,MAAM,SAAS,EAAE,KAAK;EACtB,MAAM,OAAO,EAAE,WAAW;EAC1B,MAAM,OAAO,EAAE,MAAM;EACrB,MAAM,OAAO,EAAE,QAAQ;EACvB,MAAM,OAAO,EAAE,QAAQ;EACvB,MAAM,SAAS,EAAE,QAAQ;EACzB,MAAM,OAAO,EAAE,UAAU;EACzB,KAAK,CAAC;EACN,IAAI,MAAM,SAAS,GAAG,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC;EAChD,IAAI,KAAK,MAAM,SAAS,IAAI,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE;EACzD,MAAM,IAAI,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,OAAO,cAAc,CAAC,SAAS,CAAC,CAAC;EAC1E,KAAK;EACL,IAAI,OAAO,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;EAC7D,GAAG;AACH;EACA,EAAE,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE;EACxB,IAAI,KAAK,GAAG,KAAK,IAAI,QAAQ,CAAC;EAC9B;EACA;EACA,IAAI,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;EACrD,IAAI,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;EACnC,IAAI,GAAG,CAAC,YAAY,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;EAC3C,IAAI,GAAG,CAAC,YAAY,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;EAC3C,IAAI,GAAG,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;EAClC,IAAI,GAAG,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;EACrC,IAAI,GAAG,CAAC,YAAY,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;EACrC;EACA;EACA,IAAI,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;EACrC;EACA;EACA,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,MAAM,EAAE,EAAE,mBAAmB,CAAC,CAAC;EACxD;EACA,IAAI,OAAO,GAAG,CAAC;EACf,GAAG;EACH,CAAC,CAAC;;EC1LF;AA4BA;EACA,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;AAChD;EACA,MAAM,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;EACzD,WAAW,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;EAC1C,WAAW,CAAC,YAAY,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;EAC1C,WAAW,CAAC,YAAY,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;EACxC,WAAW,CAAC,YAAY,CAAC,UAAU,EAAE;EACrC,EAAE,CAAC,EAAE,CAAC;EACN,EAAE,CAAC,EAAE,CAAC;EACN,EAAE,CAAC,EAAE,CAAC;EACN,CAAC,CAAC,CAAC;EACH,WAAW,CAAC,YAAY,CAAC,iBAAiB,EAAE,EAAE,EAAC;AAC/C;EACA,KAAK,CAAC,WAAW,CAAC,WAAW,CAAC;;;;;;"}