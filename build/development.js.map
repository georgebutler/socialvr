{"version":3,"file":"development.js","sources":["../src/components/emoji.js","../src/components/emoji-target.js","../src/components/emoji-button.js","../src/components/emoji-cancel-button.js","../src/components/emoji-audio.js","../src/systems/emoji-target.js","../src/systems/emoji-button.js","../src/main.js"],"sourcesContent":["const SPEED = 0.005;      // units per frame\r\nconst ARC = 2;            // higher = more parabolic\r\nconst AUDIO_THRESH = 10;  // distance to target to play audio cue\r\nconst SOUND = 15;         // sound effect choice\r\nconst DURATION = 3;       // duration over target before disappearing\r\n\r\nAFRAME.registerComponent(\"socialvr-emoji\", {\r\n  schema: {\r\n    target: { default: null }\r\n  },\r\n\r\n  init() {\r\n    // prevent auto remove\r\n    this.el.removeAttribute(\"owned-object-cleanup-timeout\");\r\n\r\n    this.targetInitPos = this.data.target.object3D.position.clone();\r\n    this.targetInitPos.y += 2;\r\n\r\n    let emojiPos = this.el.object3D.position;\r\n    let pt1 = new THREE.Vector3().lerpVectors(emojiPos, this.targetInitPos, 0.33);\r\n    pt1.y += ARC;\r\n    let pt2 = new THREE.Vector3().lerpVectors(emojiPos, this.targetInitPos, 0.66);\r\n    pt2.y += ARC;\r\n    this.curve = new THREE.CubicBezierCurve3(emojiPos, pt1, pt2, this.targetInitPos);\r\n    this.timeElapsed = 0;\r\n\r\n    this.soundPlayed = false;\r\n    this.audio = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\r\n      15,\r\n      this.el.object3D,\r\n      true\r\n    );\r\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopPositionalAudio(this.audio);\r\n  },\r\n\r\n  play() {\r\n    const mediaLoader = this.el.components[\"media-loader\"];\r\n    if (window.APP.utils.emojis.find(emoji => emoji.model !== mediaLoader.data.src) === -1) {\r\n      this.el.parentNode.removeChild(this.el);\r\n      return;\r\n    }\r\n\r\n    this.particleEmitter = this.el.querySelector(\".particle-emitter\");\r\n  },\r\n\r\n  tick(t, dt) {\r\n    let totalTime = this.curve.getLength() / SPEED;\r\n    let progress = this.timeElapsed / totalTime;\r\n\r\n    let emojiPos = this.el.object3D.position;\r\n    let targetPos = this.data.target.object3D.position.clone();\r\n    targetPos.y += 2;\r\n\r\n    // audio cue\r\n    let dist = emojiPos.distanceTo(targetPos);\r\n    if (!this.soundPlayed && dist < AUDIO_THRESH) {\r\n      NAF.connection.broadcastData(\"playSound\", { sound: SOUND, emojiID: this.el.id, targetID: this.data.target.id });\r\n      this.soundPlayed = true;\r\n    }\r\n\r\n    // movement\r\n    if (progress >= 1) {\r\n      // reached target\r\n      emojiPos.copy(targetPos);\r\n\r\n      this.el.setAttribute(\"owned-object-cleanup-timeout\", \"ttl\", DURATION);\r\n\r\n      NAF.connection.broadcastData(\"stopSound\", { emojiID: this.el.id, targetID: this.data.target.id });\r\n    } else {\r\n      // en route to target\r\n      emojiPos.copy(this.curve.getPointAt(progress));\r\n\r\n      let targetMovement = targetPos.sub(this.targetInitPos);\r\n      emojiPos.add(targetMovement);\r\n    }\r\n\r\n    this.timeElapsed += dt;\r\n  }\r\n});\r\n\r\nexport function sendEmoji(model, particleEmitterConfig, target) {\r\n  const emoji = window.APP.utils.addMedia(model, \"#interactable-emoji\").entity;\r\n  emoji.setAttribute(\"offset-relative-to\", {\r\n    target: \"#avatar-pov-node\",\r\n    offset: { x: 0, y: 0, z: -1.5 }\r\n  });\r\n  emoji.addEventListener(\"model-loaded\", () => {\r\n    let particleEmitter = emoji.querySelector(\".particle-emitter\");\r\n    particleEmitter.setAttribute(\"particle-emitter\", particleEmitterConfig);\r\n\r\n    emoji.setAttribute(\"socialvr-emoji\", { target: target });\r\n  });\r\n}\r\n","AFRAME.registerComponent(\"socialvr-emoji-target\", {\r\n  dependencies: [\"is-remote-hover-target\"],\r\n\r\n  init: function() {\r\n    console.log(\"[Social VR] Emoji Target - Initialized\");\r\n\r\n    this.el.setAttribute(\"tags\", \"singleActionButton: true\");\r\n    this.el.setAttribute(\"css-class\", \"interactable\");\r\n\r\n    // hover state visual\r\n    let hoverVisModel = window.APP.utils.emojis[0].model;\r\n    this.hoverVis = window.APP.utils.addMedia(hoverVisModel, \"#static-media\", null, null, false, false, false, {}, false, this.el).entity;\r\n    this.hoverVis.object3D.position.y += 2;\r\n    this.hoverVis.object3D.scale.copy(new THREE.Vector3(0.25, 0.25, 0.25));\r\n    this.hoverVis.object3D.visible = false;\r\n\r\n    this.head = window.APP.componentRegistry[\"player-info\"][0].el.querySelector(\"#avatar-pov-node\");\r\n  \r\n    this.el.addEventListener(\"hover\", this.onHover.bind(this));\r\n    this.el.addEventListener(\"unhover\", this.onUnhover.bind(this));\r\n    this.el.object3D.addEventListener(\"interact\", this.onClick.bind(this));\r\n  },\r\n  \r\n  remove: function() {\r\n    this.el.removeEventListener(\"hover\", this.onHover.bind(this));\r\n    this.el.removeEventListener(\"unhover\", this.onUnhover.bind(this));\r\n    this.el.object3D.removeEventListener(\"interact\", this.onClick.bind(this));\r\n  },\r\n\r\n  tick: function() {\r\n    // TODO: dont do this in tick, do it as players join instead\r\n    window.APP.componentRegistry[\"player-info\"].forEach(player => {\r\n      player.el.setAttribute(\"socialvr-emoji-target\", \"\");\r\n    });\r\n\r\n    // update hover state visual to face this player\r\n    this.hoverVis.object3D.lookAt(this.head.object3D.getWorldPosition(new THREE.Vector3()));\r\n  },\r\n\r\n  setComponentForAll: function() {\r\n    window.APP.componentRegistry[\"player-info\"].forEach(player => {\r\n      player.el.setAttribute(\"socialvr-emoji-target\", \"\");\r\n    });\r\n  },\r\n\r\n  onHover: function() {\r\n    this.hoverVis.object3D.visible = true;\r\n  },\r\n\r\n  onUnhover: function() {\r\n    this.hoverVis.object3D.visible = false;\r\n  },\r\n\r\n  onClick: function() {\r\n    let headHasEmojis = false;\r\n    Array.from(this.head.children).forEach(child => {\r\n      if (child.getAttribute(\"socialvr-emoji-button\") != null) {\r\n        headHasEmojis = true;\r\n      }\r\n    });\r\n\r\n    if (!headHasEmojis) {\r\n      let x = -1.5;\r\n      window.APP.utils.emojis.forEach(({ model, particleEmitterConfig }) => {\r\n        const emoji = window.APP.utils.addMedia(model, \"#static-media\", null, null, false, false, false, {}, false, this.head).entity;\r\n        emoji.object3D.scale.copy(new THREE.Vector3(0.5, 0.5, 0.5));\r\n        emoji.object3D.position.copy(new THREE.Vector3(x, -0.5, -1.5));\r\n        x += 0.5;\r\n\r\n        particleEmitterConfig.startVelocity.y = 0;\r\n        particleEmitterConfig.endVelocity.y = -2;\r\n        particleEmitterConfig.particleCount = 20;\r\n\r\n        emoji.setAttribute(\"socialvr-emoji-button\", { model: model, particleEmitterConfig: particleEmitterConfig, target: this.el });\r\n      });\r\n\r\n      const cancelButton = document.createElement(\"a-entity\");\r\n      cancelButton.setAttribute(\"socialvr-emoji-cancel-button\", \"\");\r\n      this.head.appendChild(cancelButton);\r\n      cancelButton.object3D.position.copy(new THREE.Vector3(0, -0.8, -1.5));\r\n\r\n      this.el.sceneEl.systems[\"socialvr-emoji-button\"].registerCancel(cancelButton);\r\n    }\r\n  }\r\n});","import { sendEmoji } from \"./emoji\"\r\n\r\nAFRAME.registerComponent(\"socialvr-emoji-button\", {\r\n  dependencies: [\"is-remote-hover-target\"],\r\n\r\n  schema: {\r\n    model: { default: null },\r\n    particleEmitterConfig: {\r\n      default: null,\r\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\r\n      stringify: JSON.stringify\r\n    },\r\n    target: { default: null }\r\n  },\r\n\r\n  init: function() {\r\n    console.log(\"[Social VR] Emoji Button Component - Initialized\");\r\n\r\n    this.el.setAttribute(\"tags\", \"singleActionButton: true\");\r\n    this.el.setAttribute(\"css-class\", \"interactable\");\r\n    this.el.object3D.addEventListener(\"interact\", this.onClick.bind(this));\r\n  \r\n    this.system.registerEmoji(this.el);\r\n  },\r\n  \r\n  remove: function() {\r\n    this.el.object3D.removeEventListener(\"interact\", this.onClick.bind(this));\r\n  },\r\n\r\n  onClick: function() {\r\n    sendEmoji(this.data.model, this.data.particleEmitterConfig, this.data.target);\r\n  \r\n    this.el.sceneEl.systems[\"socialvr-emoji-button\"].unregister();\r\n  }\r\n});","AFRAME.registerComponent(\"socialvr-emoji-cancel-button\", {\r\n  dependencies: [\"is-remote-hover-target\"],\r\n\r\n  init: function() {\r\n    console.log(\"[Social VR] Emoji Cancel Button Component - Initialized\");\r\n\r\n    this.el.setAttribute(\"geometry\", \"primitive:plane; height:0.1; width:0.3\");\r\n    const text = document.createElement(\"a-entity\");\r\n    text.setAttribute(\"text\", \"value:CANCEL; align:center; color:black\");\r\n    this.el.appendChild(text);\r\n    text.object3D.position.copy(new THREE.Vector3(0, 0.05, 0.1));\r\n\r\n    this.el.setAttribute(\"tags\", \"singleActionButton: true\");\r\n    this.el.setAttribute(\"css-class\", \"interactable\");\r\n    this.el.object3D.addEventListener(\"interact\", this.onClick.bind(this));\r\n  },\r\n\r\n  remove: function() {\r\n    this.el.object3D.removeEventListener(\"interact\", this.onClick.bind(this));\r\n  },\r\n\r\n  onClick: function() {\r\n    this.el.sceneEl.systems[\"socialvr-emoji-button\"].unregister();\r\n  }\r\n});","AFRAME.registerComponent(\"socialvr-emoji-audio\", {\r\n  init: function() {\r\n    console.log(\"[Social VR] Emoji Manager Component - Initialized\");\r\n\r\n    NAF.connection.subscribeToDataChannel(\"playSound\", this.playSound.bind(this));\r\n    NAF.connection.subscribeToDataChannel(\"stopSound\", this.stopSound.bind(this));\r\n  \r\n    this.emojiAudio = {};\r\n},\r\n  \r\n  remove: function() {\r\n    NAF.connection.unsubscribeToDataChannel(\"playSound\");\r\n    NAF.connection.unsubscribeToDataChannel(\"stopSound\");\r\n  },\r\n\r\n  playSound: function(senderId, dataType, data, targetId) {\r\n    let emoji = document.getElementById(data.emojiID);\r\n\r\n    //if (data.targetID == this player id) {\r\n    if (true) {\r\n      let audio = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\r\n        data.sound,\r\n        emoji.object3D,\r\n        true\r\n      );\r\n\r\n      this.emojiAudio[data.emojiID] = audio;\r\n    }\r\n  },\r\n\r\n  stopSound: function(senderId, dataType, data, targetId) {\r\n    //if (data.targetID == this player id) {\r\n    if (true) {\r\n      let audio = this.emojiAudio[data.emojiID];\r\n\r\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopPositionalAudio(audio);\r\n    }  \r\n  },\r\n});","AFRAME.registerSystem(\"socialvr-emoji-target\", {\r\n  init: function() {\r\n    this.hoverEl = null;\r\n  },\r\n\r\n  tick: function() {\r\n    let currHoverEl = this.el.systems.interaction.state.rightRemote.hovered;\r\n\r\n    if (currHoverEl && currHoverEl.getAttribute(\"socialvr-emoji-target\")) {\r\n      if (!this.hoverEl) {\r\n        currHoverEl.emit(\"hover\");\r\n        this.hoverEl = currHoverEl;\r\n      }\r\n    } else {\r\n      if (this.hoverEl) {\r\n        this.hoverEl.emit(\"unhover\");\r\n        this.hoverEl = null;\r\n      }\r\n    }\r\n  }\r\n});","AFRAME.registerSystem(\"socialvr-emoji-button\", {\r\n  init: function() {\r\n    console.log(\"[Social VR] Emoji Button System - Initialized\");\r\n    this.emojiButtons = [];\r\n    this.cancelButton = null;\r\n  },\r\n\r\n  // register single emoji button\r\n  registerEmoji: function(emojiButton) {\r\n    this.emojiButtons.push(emojiButton);\r\n  },\r\n\r\n  registerCancel: function(cancelButton) {\r\n    this.cancelButton = cancelButton;\r\n  },\r\n\r\n  // unregister all emoji buttons\r\n  unregister: function() {\r\n    while (this.emojiButtons.length > 0) {\r\n      this.emojiButtons[0].parentEl.removeChild(this.emojiButtons[0]);\r\n      this.emojiButtons.shift();\r\n    }\r\n\r\n    this.cancelButton.parentEl.removeChild(this.cancelButton);\r\n    this.cancelButton = null;\r\n  }\r\n});\r\n","// import \"./components/toolbox-button\";\r\n\r\n// const scene = document.querySelector(\"a-scene\");\r\n\r\n// ///////////\r\n// // BARGE //\r\n// ///////////\r\n\r\n// import \"./components/barge\";\r\n// import \"./components/barge-button\";\r\n// import \"./systems/barge\";\r\n// import { CreateBarge } from \"./systems/barge\";\r\n\r\n// const [barge, bargeToolboxButton] = CreateBarge();\r\n// scene.appendChild(barge);\r\n// scene.appendChild(bargeToolboxButton);\r\n\r\n// window.startPhaseTesting = function() {\r\n//   let phase = 1;\r\n//   barge.emit(\"advancePhaseEvent\");\r\n//   console.log(`[Social VR] Barge - Current Phase: ${phase}`);\r\n// };\r\n\r\n// /////////////\r\n// // SPEECH  //\r\n// /////////////\r\n\r\n// import \"./components/speech\";\r\n// import \"./systems/speech\";\r\n// import { CreateSpeech } from \"./systems/speech\";\r\n\r\n// const [speechVisEl, speechToolboxButton] = CreateSpeech();\r\n// scene.appendChild(speechVisEl);\r\n// scene.appendChild(speechToolboxButton);\r\n\r\nimport \"./components/emoji\";\r\nimport \"./components/emoji-target\";\r\nimport \"./components/emoji-button\";\r\nimport \"./components/emoji-cancel-button\";\r\nimport \"./components/emoji-audio\";\r\n\r\nimport \"./systems/emoji-target\";\r\nimport \"./systems/emoji-button\";\r\n\r\nconst scene = document.querySelector(\"a-scene\");\r\n\r\nconst emojiAudio = document.createElement(\"a-entity\");\r\nemojiAudio.setAttribute(\"socialvr-emoji-audio\", \"\");\r\nscene.appendChild(emojiAudio);\r\n\r\nconst dummy = document.createElement(\"a-box\");\r\ndummy.setAttribute(\"socialvr-emoji-target\", \"\");\r\nscene.appendChild(dummy);\r\n"],"names":[],"mappings":"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"}