{"version":3,"file":"development.js","sources":["../src/components/avatar-proxvis.js","../src/main.js"],"sourcesContent":["\r\nAFRAME.registerComponent(\"socialvr-proxvis\", {\r\n    init: function () {\r\n\r\n        this.start = Date.now()\r\n        this.current = Date.now()\r\n\r\n        this.geometry = new THREE.RingGeometry( 1.2, 1.8, 16, 10, 3);\r\n        this.ringMaterial = new THREE.ShaderMaterial({\r\n            uniforms: {\r\n                uTime: {value: 0.0}\r\n            },\r\n            vertexShader: `varying vec3 vPosition;\r\n                            uniform float uTime;\r\n                            void main() {\r\n                                \r\n                                vec4 modelPosition = modelMatrix * vec4(position, 1.0);\r\n                                vec4 viewPosition = viewMatrix * modelPosition;\r\n                                vec4 projectedPosition = projectionMatrix * viewPosition;\r\n                                gl_Position = projectedPosition;\r\n                                vPosition = position;\r\n                            }`,\r\n            fragmentShader: \r\n            `\r\n                varying vec3 vPosition;\r\n                uniform float uTime;\r\n\r\n                void main() {\r\n                    vec3 color = vec3(1.0);\r\n\r\n                    gl_FragColor = vec4(color,0.5 + sin(vPosition.x * 4.0 + uTime) / 2.0 );\r\n                }\r\n            `,\r\n            transparent: true,\r\n        })\r\n        // this.material = new THREE.MeshStandardMaterial({ color: \"blue\" , side: THREE.DoubleSide});\r\n\r\n        this.mesh = new THREE.Mesh(this.geometry, this.ringMaterial);\r\n        this.mesh.rotateX(THREE.Math.degToRad(-90));\r\n        this.mesh.position.z -= 0.5\r\n\r\n        this.el.setObject3D(\"mesh\", this.mesh);\r\n    },\r\n    tick: function(time, delta){\r\n        const currentTime = Date.now()\r\n        this.current = currentTime\r\n        this.elapsed = this.current - this.start\r\n        this.ringMaterial.uniforms.uTime.value = this.elapsed\r\n        //\r\n        // APP.componentRegistry[\"player-info\"]\r\n    },\r\n\r\n    tock: function(time, delta) {\r\n        \r\n        /** \r\n        if (!this.data.target) { return; }\r\n        if (!NAF.utils.isMine(this.el)) { return; }\r\n\r\n        const scale = 0.1 * (delta / 1000);\r\n\r\n        this.mesh.scale.addScalar(scale);\r\n        this.mesh.scale.set(this.mesh.scale.x, this.mesh.scale.y, 1);\r\n        this.mesh.matrixAutoUpdate = true;\r\n        */\r\n    }\r\n});","// import \"./components/barge-button\";\r\n// import \"./components/barge-clock\";\r\n// import \"./components/barge-slot\";\r\n// import \"./components/barge-data\";\r\n// import \"./components/world-mover\";\r\n// import \"./components/halo\";\r\nimport \"./components/avatar-proxvis\";\r\n\r\nconst FEATURE_PROXVIS = true;\r\n\r\n// // Barge\r\n// window.APP.scene.addEventListener(\"environment-scene-loaded\", () => {\r\n\r\n//   if (FEATURE_BARGE) {\r\n//     // Button\r\n//     let button = document.createElement(\"a-entity\");\r\n//     let position = document.querySelector(\".startButton\").object3D.position.add(new THREE.Vector3(0, 0.5, 0))\r\n\r\n//     button.setAttribute(\"socialvr-barge-button\", \"text: Start; radius: 0.3; color: #C576F6; phaseID: 1\");\r\n//     button.setAttribute(\"position\", position);\r\n//     window.APP.scene.appendChild(button);\r\n\r\n//     // Button\r\n//     button = document.createElement(\"a-entity\");\r\n//     position = document.querySelector(\".CompleteButton_phase1\").object3D.position.add(new THREE.Vector3(0, 0.5, 0))\r\n\r\n//     button.setAttribute(\"socialvr-barge-button\", \"text: Next Task; radius: 0.3; color: #C576F6; phaseID: 2\");\r\n//     button.setAttribute(\"position\", position);\r\n//     window.APP.scene.appendChild(button);\r\n\r\n//     // Button\r\n//     button = document.createElement(\"a-entity\");\r\n//     position = document.querySelector(\".CompleteButton_phase2\").object3D.position.add(new THREE.Vector3(0, 0.5, 0))\r\n\r\n//     button.setAttribute(\"socialvr-barge-button\", \"text: Next Task; radius: 0.3; color: #C576F6; phaseID: 3\");\r\n//     button.setAttribute(\"position\", position);\r\n//     window.APP.scene.appendChild(button);\r\n\r\n//     // Button\r\n//     button = document.createElement(\"a-entity\");\r\n//     position = document.querySelector(\".CompleteButton_phase3\").object3D.position.add(new THREE.Vector3(0, 0.5, 0))\r\n\r\n//     button.setAttribute(\"socialvr-barge-button\", \"text: Complete; radius: 0.3; color: #C576F6; phaseID: 4\");\r\n//     button.setAttribute(\"position\", position);\r\n//     window.APP.scene.appendChild(button);\r\n\r\n//     // Clock\r\n//     const clock = document.createElement(\"a-entity\");\r\n//     clock.setAttribute(\"radius\", 0.1);\r\n//     clock.setAttribute(\"socialvr-barge-clock\", \"\");\r\n//     clock.setAttribute(\"position\", document.querySelector(\".clock-placeholder\").object3D.position);\r\n//     window.APP.scene.appendChild(clock);\r\n\r\n//     // Ranking Slots\r\n//     for (let index = 1; index <= 3; index++) {\r\n//       const slot = document.createElement(\"a-entity\");\r\n//       slot.setAttribute(\"position\", { x: 0, y: -1 + (0.4 * index), z: 0 });\r\n//       slot.setAttribute(\"socialvr-barge-slot\", `type: knowledge; rank: ${4 - index}`);\r\n//       document.querySelector(\".knowledgeFrame_phase1\").appendChild(slot);\r\n//     }\r\n\r\n//     for (let index = 1; index <= 3; index++) {\r\n//       const slot = document.createElement(\"a-entity\");\r\n//       slot.setAttribute(\"position\", { x: 0, y: -1 + (0.4 * index), z: 0 });\r\n//       slot.setAttribute(\"socialvr-barge-slot\", `type: abilities; rank: ${4 - index}`);\r\n//       document.querySelector(\".KSA_ranking_frameglb_1_phase1\").appendChild(slot);\r\n//     }\r\n\r\n//     for (let index = 1; index <= 3; index++) {\r\n//       const slot = document.createElement(\"a-entity\");\r\n//       slot.setAttribute(\"position\", { x: 0, y: -1 + (0.4 * index), z: 0 });\r\n//       slot.setAttribute(\"socialvr-barge-slot\", `type: skills; rank: ${4 - index}`);\r\n//       document.querySelector(\".KSA_ranking_frameglb_phase1\").appendChild(slot);\r\n//     }\r\n\r\n//     // Canidate Slot\r\n//     const slot = document.createElement(\"a-entity\");\r\n//     slot.setAttribute(\"socialvr-barge-slot\", `type: canidate; rank: 1; width: 0.5; height: 1; depth: 1;`);\r\n//     document.querySelector(\".candidate_frameglb_phase3\").appendChild(slot);\r\n\r\n//     // World Mover\r\n//     const worldMover = document.createElement(\"a-entity\");\r\n//     worldMover.setAttribute(\"socialvr-world-mover\", \"\");\r\n//     window.APP.scene.appendChild(worldMover);\r\n\r\n//     // Data Logger\r\n//     const dataLogger = document.createElement(\"a-entity\");\r\n//     dataLogger.setAttribute(\"socialvr-barge-data\", \"\");\r\n//     window.APP.scene.appendChild(dataLogger);\r\n\r\n//     // Changes camera inspection system to show background, regardless of user preferences.\r\n//     const cameraSystem = window.APP.scene.systems[\"hubs-systems\"].cameraSystem;\r\n//     cameraSystem.lightsEnabled = true;\r\n\r\n//     // Disable floaty physics\r\n//     window.APP.scene.addEventListener(\"object_spawned\", (e) => {\r\n//       const floaties = document.querySelectorAll(\"[floaty-object]\");\r\n\r\n//       floaties.forEach((floaty) => {\r\n//         floaty.setAttribute(\"floaty-object\", {\r\n//           reduceAngularFloat: true,\r\n//           autoLockOnRelease: true,\r\n//           gravitySpeedLimit: 0\r\n//         });\r\n//       });\r\n//     });\r\n//   }\r\n// }, { once: true });\r\n\r\n// Halo\r\nwindow.APP.hubChannel.presence.onJoin(() => {\r\n  if(FEATURE_PROXVIS){\r\n    console.log('proxvis activated !')\r\n    APP.componentRegistry[\"player-info\"].forEach((playerInfo) => {\r\n      if (!playerInfo.socialVRProxvis) {\r\n        const proxvis = document.createElement(\"a-entity\");\r\n        proxvis.setAttribute('socialvr-proxvis',\"\")\r\n        //checks if social VR Proxvis has already been activated\r\n        playerInfo.socialVRProxvis = true\r\n        playerInfo.el.appendChild(proxvis);\r\n      }\r\n    })\r\n  }\r\n});\r\n"],"names":[],"mappings":";;;IACA,MAAM,CAAC,iBAAiB,CAAC,kBAAkB,EAAE;IAC7C,IAAI,IAAI,EAAE,YAAY;AACtB;IACA,QAAQ,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,GAAE;IAC/B,QAAQ,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,GAAE;AACjC;IACA,QAAQ,IAAI,CAAC,QAAQ,GAAG,IAAI,KAAK,CAAC,YAAY,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;IACrE,QAAQ,IAAI,CAAC,YAAY,GAAG,IAAI,KAAK,CAAC,cAAc,CAAC;IACrD,YAAY,QAAQ,EAAE;IACtB,gBAAgB,KAAK,EAAE,CAAC,KAAK,EAAE,GAAG,CAAC;IACnC,aAAa;IACb,YAAY,YAAY,EAAE,CAAC;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,CAAC;IAC9B,YAAY,cAAc;IAC1B,YAAY,CAAC;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,CAAC;IACb,YAAY,WAAW,EAAE,IAAI;IAC7B,SAAS,EAAC;IACV;AACA;IACA,QAAQ,IAAI,CAAC,IAAI,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;IACrE,QAAQ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACpD,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAG;AACnC;IACA,QAAQ,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;IAC/C,KAAK;IACL,IAAI,IAAI,EAAE,SAAS,IAAI,EAAE,KAAK,CAAC;IAC/B,QAAQ,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,GAAE;IACtC,QAAQ,IAAI,CAAC,OAAO,GAAG,YAAW;IAClC,QAAQ,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAK;IAChD,QAAQ,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,QAAO;IAC7D;IACA;IACA,KAAK;AACL;IACA,IAAI,IAAI,EAAE,SAAS,IAAI,EAAE,KAAK,EAAE;IAChC;IACA;IACA;IACA;AACA;IACA;AACA;IACA;IACA;IACA;IACA;IACA,KAAK;IACL,CAAC,CAAC;;ICjEF;AASA;IACA;IACA;AACA;IACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;AACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;AACA;IACA;IACA,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM;IAC5C,EAAqB;IACrB,IAAI,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAC;IACtC,IAAI,GAAG,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,CAAC,UAAU,KAAK;IACjE,MAAM,IAAI,CAAC,UAAU,CAAC,eAAe,EAAE;IACvC,QAAQ,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;IAC3D,QAAQ,OAAO,CAAC,YAAY,CAAC,kBAAkB,CAAC,EAAE,EAAC;IACnD;IACA,QAAQ,UAAU,CAAC,eAAe,GAAG,KAAI;IACzC,QAAQ,UAAU,CAAC,EAAE,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;IAC3C,OAAO;IACP,KAAK,EAAC;IACN,GAAG;IACH,CAAC,CAAC;;;;;;"}