{"version":3,"file":"development.js","sources":["../src/components/emoji-target.js","../src/hubs/emoji.js","../src/components/emoji-button.js","../src/components/emoji-cancel-button.js","../src/systems/emoji-button.js","../src/main.js"],"sourcesContent":["AFRAME.registerComponent(\"socialvr-emoji-target\", {\r\n  dependencies: [\"is-remote-hover-target\"],\r\n\r\n  init: function() {\r\n    console.log(\"[Social VR] Emoji Target - Initialized\");\r\n\r\n    this.el.setAttribute(\"tags\", \"singleActionButton: true\");\r\n    this.el.setAttribute(\"css-class\", \"interactable\");\r\n    this.el.object3D.addEventListener(\"interact\", this.onClick.bind(this));\r\n\r\n    // window.APP.hubChannel.presence.onJoin((clientId) => {\r\n    //   console.log(\"[SocialVR] Player Joined\");\r\n    // })\r\n  },\r\n  \r\n  remove: function() {\r\n    this.el.object3D.removeEventListener(\"interact\", this.onClick.bind(this));\r\n  },\r\n\r\n  tick: function() {\r\n    // TODO: more efficient way to do this\r\n    window.APP.componentRegistry[\"player-info\"].forEach(player => {\r\n      player.el.setAttribute(\"socialvr-emoji-target\", \"\");\r\n    });\r\n  },\r\n\r\n  onClick: function() {\r\n    const head = window.APP.componentRegistry[\"player-info\"][0].el.querySelector(\"#avatar-pov-node\");\r\n\r\n    let headHasEmojis = false;\r\n    Array.from(head.children).forEach(child => {\r\n      if (child.getAttribute(\"socialvr-emoji-button\") != null) {\r\n        headHasEmojis = true;\r\n      }\r\n    });\r\n\r\n    if (!headHasEmojis) {\r\n      let x = -1.5;\r\n      window.APP.utils.emojis.forEach(({ model, particleEmitterConfig }) => {\r\n        const emoji = window.APP.utils.addMedia(model, \"#static-media\", null, null, false, false, false, {}, false, head).entity;\r\n        emoji.object3D.scale.copy(new THREE.Vector3(0.5, 0.5, 0.5));\r\n        emoji.object3D.position.copy(new THREE.Vector3(x, -0.5, -1.5));\r\n        x += 0.5;\r\n\r\n        particleEmitterConfig.startVelocity.y = -1;\r\n        particleEmitterConfig.endVelocity.y = -0.25;\r\n        particleEmitterConfig.lifetime = 10;\r\n        particleEmitterConfig.particleCount = 20;\r\n\r\n        emoji.setAttribute(\"socialvr-emoji-button\", { model: model, particleEmitterConfig: particleEmitterConfig, target: this.el });\r\n      });\r\n\r\n      const cancelButton = document.createElement(\"a-entity\");\r\n      cancelButton.setAttribute(\"socialvr-emoji-cancel-button\", \"\");\r\n      head.appendChild(cancelButton);\r\n      cancelButton.object3D.position.copy(new THREE.Vector3(0, -0.8, -1.5));\r\n\r\n      this.el.sceneEl.systems[\"socialvr-emoji-button\"].registerCancel(cancelButton);\r\n    }\r\n  }\r\n});","import { isThisSecond } from \"date-fns\";\r\n\r\nconst SPEED = 0.005;      // units per frame\r\nconst ARC = 2;            // higher = more parabolic\r\nconst AUDIO_THRESH = 10;  // distance to target to play audio cue\r\n\r\nAFRAME.registerComponent(\"hubs-emoji\", {\r\n  schema: {\r\n    emitDecayTime: { default: 1.5 },\r\n    emitFadeTime: { default: 0.5 },\r\n    emitEndTime: { default: 0 },\r\n    particleEmitterConfig: {\r\n      default: null,\r\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\r\n      stringify: JSON.stringify\r\n    },\r\n    target: { default: null }\r\n  },\r\n\r\n  init() {\r\n    this.data.emitEndTime = performance.now() + this.data.emitDecayTime * 1000;\r\n    this.physicsSystem = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\r\n\r\n    // prevent auto remove\r\n    this.el.removeAttribute(\"owned-object-cleanup-timeout\");\r\n\r\n    this.targetInitPos = this.data.target.object3D.position.clone();\r\n\r\n    let emojiPos = this.el.object3D.position;\r\n    let targetPos = this.data.target.object3D.position.clone();\r\n    targetPos.y += 2;\r\n\r\n    let pt1 = new THREE.Vector3().lerpVectors(emojiPos, targetPos, 0.33);\r\n    pt1.y += ARC;\r\n    let pt2 = new THREE.Vector3().lerpVectors(emojiPos, targetPos, 0.66);\r\n    pt2.y += ARC;\r\n    this.curve = new THREE.CubicBezierCurve3(emojiPos, pt1, pt2, targetPos);\r\n\r\n    this.timeElapsed = 0;\r\n    this.soundPlayed = false;\r\n    this.audio = null;\r\n  },\r\n\r\n  play() {\r\n    const mediaLoader = this.el.components[\"media-loader\"];\r\n    if (window.APP.utils.emojis.find(emoji => emoji.model !== mediaLoader.data.src) === -1) {\r\n      this.el.parentNode.removeChild(this.el);\r\n      return;\r\n    }\r\n\r\n    this.particleEmitter = this.el.querySelector(\".particle-emitter\");\r\n  },\r\n\r\n  update() {\r\n    if (!this.particleConfig && this.data.particleEmitterConfig) {\r\n      this.particleConfig = Object.assign({}, this.data.particleEmitterConfig);\r\n      this.originalParticleCount = this.particleConfig.particleCount;\r\n    }\r\n  },\r\n\r\n  tick(t, dt) {\r\n    let totalTime = this.curve.getLength() / SPEED;\r\n    let progress = this.timeElapsed / totalTime;\r\n\r\n    let emojiPos = this.el.object3D.position;\r\n    let targetPos = this.data.target.object3D.position.clone();\r\n\r\n    // audio cue\r\n    let dist = emojiPos.distanceTo(targetPos);\r\n    if (!this.soundPlayed && dist < AUDIO_THRESH) {\r\n      this.audio = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\r\n        15,\r\n        this.el.object3D,\r\n        true\r\n      );\r\n      \r\n      this.soundPlayed = true;\r\n    }\r\n\r\n    // movement\r\n    if (progress >= 1) {\r\n      // reached target\r\n      targetPos.y += 2;\r\n      emojiPos.copy(targetPos);\r\n\r\n      this.el.setAttribute(\"owned-object-cleanup-timeout\", \"ttl\", 2);\r\n\r\n      if (this.audio != null) {\r\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopPositionalAudio(this.audio);\r\n      }\r\n    } else {\r\n      // en route to target\r\n      emojiPos.copy(this.curve.getPointAt(progress));\r\n\r\n      let targetMovement = targetPos.sub(this.targetInitPos);\r\n      emojiPos.add(targetMovement);\r\n    }\r\n\r\n    this.timeElapsed += dt;\r\n\r\n    // Hubs code\r\n    const isMine = this.el.components.networked.initialized && this.el.components.networked.isMine();\r\n\r\n    if (this.particleConfig && isMine) {\r\n      const now = performance.now();\r\n\r\n      const isHeld = this.el.sceneEl.systems.interaction.isHeld(this.el);\r\n\r\n      if (isHeld) {\r\n        this.data.emitEndTime = now + this.data.emitDecayTime * 1000;\r\n      }\r\n\r\n      const emitFadeTime = this.data.emitFadeTime * 1000;\r\n\r\n      if (now < this.data.emitEndTime && this.particleConfig.startOpacity < 1) {\r\n        this.particleConfig.particleCount = this.originalParticleCount;\r\n        this.particleConfig.startOpacity = 1;\r\n        this.particleConfig.middleOpacity = 1;\r\n        this.particleEmitter.setAttribute(\"particle-emitter\", this.particleConfig, true);\r\n      } else if (now >= this.data.emitEndTime && this.particleConfig.startOpacity > 0.001) {\r\n        const timeSinceStop = Math.min(now - this.data.emitEndTime, emitFadeTime);\r\n        const opacity = 1 - timeSinceStop / emitFadeTime;\r\n        const particleCount = opacity < 0.001 && this.particleConfig.particleCount > 0 ? 0 : this.originalParticleCount;\r\n        this.particleConfig.particleCount = particleCount;\r\n        this.particleConfig.startOpacity = opacity;\r\n        this.particleConfig.middleOpacity = opacity;\r\n        this.particleEmitter.setAttribute(\"particle-emitter\", this.particleConfig, true);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nexport function sendEmoji(model, particleEmitterConfig, target) {\r\n  const { entity } = window.APP.utils.addMedia(model, \"#interactable-emoji\");\r\n  entity.setAttribute(\"offset-relative-to\", {\r\n    target: \"#avatar-pov-node\",\r\n    offset: { x: 0, y: 0, z: -1.5 }\r\n  });\r\n  entity.addEventListener(\"model-loaded\", () => {\r\n    let particleEmitter = entity.querySelector(\".particle-emitter\");\r\n    particleEmitter.setAttribute(\"particle-emitter\", particleEmitterConfig);\r\n\r\n    entity.setAttribute(\"hubs-emoji\", { particleEmitterConfig: particleEmitterConfig, target: target });\r\n  });\r\n}\r\n","import { sendEmoji } from \"../hubs/emoji\"\r\n\r\nAFRAME.registerComponent(\"socialvr-emoji-button\", {\r\n  dependencies: [\"is-remote-hover-target\"],\r\n\r\n  schema: {\r\n    model: { default: null },\r\n    particleEmitterConfig: {\r\n      default: null,\r\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\r\n      stringify: JSON.stringify\r\n    },\r\n    target: { default: null }\r\n  },\r\n\r\n  init: function() {\r\n    console.log(\"[Social VR] Emoji Button Component - Initialized\");\r\n\r\n    this.el.setAttribute(\"tags\", \"singleActionButton: true\");\r\n    this.el.setAttribute(\"css-class\", \"interactable\");\r\n    this.el.object3D.addEventListener(\"interact\", this.onClick.bind(this));\r\n  \r\n    this.system.registerEmoji(this.el);\r\n  },\r\n  \r\n  remove: function() {\r\n    this.el.object3D.removeEventListener(\"interact\", this.onClick.bind(this));\r\n  },\r\n\r\n  onClick: function() {\r\n    sendEmoji(this.data.model, this.data.particleEmitterConfig, this.data.target);\r\n  \r\n    this.el.sceneEl.systems[\"socialvr-emoji-button\"].unregister();\r\n  }\r\n});","AFRAME.registerComponent(\"socialvr-emoji-cancel-button\", {\r\n  dependencies: [\"is-remote-hover-target\"],\r\n\r\n  init: function() {\r\n    console.log(\"[Social VR] Emoji Cancel Button Component - Initialized\");\r\n\r\n    this.el.setAttribute(\"geometry\", \"primitive:plane; height:0.1; width:0.3\");\r\n    const text = document.createElement(\"a-entity\");\r\n    text.setAttribute(\"text\", \"value:CANCEL; align:center; color:black\");\r\n    this.el.appendChild(text);\r\n    text.object3D.position.copy(new THREE.Vector3(0, 0.05, 0.1));\r\n\r\n    this.el.setAttribute(\"tags\", \"singleActionButton: true\");\r\n    this.el.setAttribute(\"css-class\", \"interactable\");\r\n    this.el.object3D.addEventListener(\"interact\", this.onClick.bind(this));\r\n  },\r\n\r\n  remove: function() {\r\n    this.el.object3D.removeEventListener(\"interact\", this.onClick.bind(this));\r\n  },\r\n\r\n  onClick: function() {\r\n    this.el.sceneEl.systems[\"socialvr-emoji-button\"].unregister();\r\n  }\r\n});","import { isThisSecond } from \"date-fns\";\r\n\r\nAFRAME.registerSystem(\"socialvr-emoji-button\", {\r\n  init: function() {\r\n    console.log(\"[Social VR] Emoji Button System - Initialized\");\r\n    this.emojiButtons = [];\r\n    this.cancelButton = null;\r\n  },\r\n\r\n  // register single emoji button\r\n  registerEmoji: function(emojiButton) {\r\n    this.emojiButtons.push(emojiButton);\r\n  },\r\n\r\n  registerCancel: function(cancelButton) {\r\n    this.cancelButton = cancelButton;\r\n  },\r\n\r\n  // unregister all emoji buttons\r\n  unregister: function() {\r\n    while (this.emojiButtons.length > 0) {\r\n      this.emojiButtons[0].parentEl.removeChild(this.emojiButtons[0]);\r\n      this.emojiButtons.shift();\r\n    }\r\n\r\n    this.cancelButton.parentEl.removeChild(this.cancelButton);\r\n    this.cancelButton = null;\r\n  }\r\n});\r\n","// import \"./components/toolbox-button\";\r\n\r\n// const scene = document.querySelector(\"a-scene\");\r\n\r\n// ///////////\r\n// // BARGE //\r\n// ///////////\r\n\r\n// import \"./components/barge\";\r\n// import \"./components/barge-button\";\r\n// import \"./systems/barge\";\r\n// import { CreateBarge } from \"./systems/barge\";\r\n\r\n// const [barge, bargeToolboxButton] = CreateBarge();\r\n// scene.appendChild(barge);\r\n// scene.appendChild(bargeToolboxButton);\r\n\r\n// window.startPhaseTesting = function() {\r\n//   let phase = 1;\r\n//   barge.emit(\"advancePhaseEvent\");\r\n//   console.log(`[Social VR] Barge - Current Phase: ${phase}`);\r\n// };\r\n\r\n// /////////////\r\n// // SPEECH  //\r\n// /////////////\r\n\r\n// import \"./components/speech\";\r\n// import \"./systems/speech\";\r\n// import { CreateSpeech } from \"./systems/speech\";\r\n\r\n// const [speechVisEl, speechToolboxButton] = CreateSpeech();\r\n// scene.appendChild(speechVisEl);\r\n// scene.appendChild(speechToolboxButton);\r\n\r\nimport \"./components/emoji-target\";\r\nimport \"./components/emoji-button\";\r\nimport \"./components/emoji-cancel-button\";\r\nimport \"./systems/emoji-button\";\r\nimport \"./hubs/emoji\";\r\n\r\nconst scene = document.querySelector(\"a-scene\");\r\n\r\nconst dummy = document.createElement(\"a-box\");\r\ndummy.setAttribute(\"socialvr-emoji-target\", \"\");\r\nscene.appendChild(dummy);\r\n"],"names":[],"mappings":"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"}