{"version":3,"file":"production.js","sources":["../src/components/toolbox-button.js","../src/components/barge.js","../src/systems/barge.js","../src/components/barge-button.js","../src/main.js"],"sourcesContent":["//import \"./systems/sound-effects-system\";\r\n\r\n// button for turning specified social VR systems on and off\r\nAFRAME.registerComponent(\"socailvr-toolbox-button\", {\r\n  dependencies: [\"is-remote-hover-target\", \"hoverable-visuals\"],\r\n\r\n  schema: {type: \"string\", default: \"Barge\"},\r\n\r\n  init: function() {\r\n    // button text\r\n    const textEl = document.createElement(\"a-entity\");\r\n    textEl.setAttribute(\"text\", `value: ${this.data.toUpperCase()}; align: center; color: black`);\r\n    textEl.setAttribute(\"rotation\", \"0 270 0\");\r\n    textEl.setAttribute(\"position\", \"0 0.4 0\");\r\n    this.el.appendChild(textEl);\r\n\r\n    this.onClick = this.onClick.bind(this);\r\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\r\n\r\n    // precondition: barge already in the scene\r\n    this.barge = this.el.sceneEl.systems[\"socialvr-barge\"].barge;\r\n    \r\n    NAF.connection.subscribeToDataChannel(\"createBarge\", this.createBarge.bind(this));\r\n    NAF.connection.subscribeToDataChannel(\"removeBarge\", this.removeBarge.bind(this));\r\n  },\r\n\r\n  remove: function() {\r\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\r\n    NAF.connection.unsubscribeToDataChannel(\"createBarge\");\r\n    NAF.connection.unsubscribeToDataChannel(\"removeBarge\");\r\n  },\r\n\r\n  onClick: function() {\r\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\r\n      SOUND_SNAP_ROTATE,\r\n      this.el.object3D\r\n    );\r\n\r\n    switch (this.data) {\r\n      case \"Barge\":\r\n        if (this.barge.getAttribute(\"visible\")) {\r\n          this.removeBarge();\r\n          NAF.connection.broadcastData(\"removeBarge\", {});\r\n        } else {\r\n          this.createBarge();\r\n          NAF.connection.broadcastData(\"createBarge\", {});          \r\n        }\r\n\r\n      default:\r\n        console.log(`Invalid social VR system ${this.data}`);\r\n    }\r\n  },\r\n\r\n  createBarge() {\r\n    this.barge.setAttribute(\"visible\", true);\r\n    this.barge.play();\r\n  },\r\n\r\n  removeBarge() {\r\n    this.barge.emit(\"resetBargeEvent\");   // current behavior: onboard passengers teleport back to spawn\r\n    this.barge.setAttribute(\"visible\", false);\r\n    this.barge.pause();\r\n  }\r\n});","// responsible for barge children creation and movement\r\n\r\n// import \"./utils/get-current-player-height\";\r\n// import \"./utils/three-utils\";\r\n// import \"./components/gltf-model-plus\";\r\n// import bargeModelSrc from \"./assets/models/BargeMesh.glb\";\r\n\r\nlet positions = [];\r\nlet lastKeyChange = 0;\r\n\r\nAFRAME.registerComponent(\"socialvr-barge\", {\r\n  schema: {\r\n    width: { type: \"number\", default: 4 },\r\n    height: { type: \"number\", default: 1 },\r\n    depth: { type: \"number\", default: 4 },\r\n    speed: { type: \"number\", default: 1 },\r\n    moving: { type: \"boolean\", default: false },\r\n    targetKey: { type: \"number\", default: 0 }\r\n  },\r\n\r\n  init() {\r\n    this.direction = new THREE.Vector3();\r\n\r\n    // TODO: Load model\r\n    // loadModel(bargeModelSrc).then(model => {\r\n    //   console.log(`[Social VR] Barge System - Mesh Loaded`);\r\n\r\n    //   const mesh = cloneObject3D(model.scene);\r\n    //   mesh.scale.set(2, 2, 2);\r\n    //   mesh.matrixNeedsUpdate = true;\r\n    //   this.el.setObject3D(\"mesh\", mesh);\r\n\r\n    //   this.el.object3D.scale.set(0.5, 0.5, 0.5);\r\n    //   this.el.object3D.matrixNeedsUpdate = true;\r\n    // });\r\n\r\n    const mesh = document.createElement(\"a-box\");\r\n    mesh.setAttribute(\"height\", \"1\");\r\n    mesh.setAttribute(\"depth\", \"10\");\r\n    mesh.setAttribute(\"width\", \"10\");\r\n    this.el.setObject3D(\"mesh\", mesh);\r\n    this.el.object3D.matrixNeedsUpdate = true;\r\n\r\n    // Reset Button\r\n    const buttonResetEl = document.createElement(\"a-sphere\");\r\n    buttonResetEl.setAttribute(\"socialvr-barge-button\", \"reset\");\r\n    buttonResetEl.setAttribute(\"radius\", \"0.15\");\r\n    buttonResetEl.setAttribute(\"material\", \"color: #3B56DC\");\r\n    buttonResetEl.setAttribute(\"tags\", \"singleActionButton: true\");\r\n    buttonResetEl.setAttribute(\"css-class\", \"interactable\");\r\n    buttonResetEl.setAttribute(\"position\", {\r\n      x: this.el.object3D.position.x + (2 - 0.2),\r\n      y: this.el.object3D.position.y + 1,\r\n      z: this.el.object3D.position.z\r\n    });\r\n    this.el.appendChild(buttonResetEl);\r\n\r\n    // Start Button\r\n    const buttonGoEl = document.createElement(\"a-sphere\");\r\n    buttonGoEl.setAttribute(\"socialvr-barge-button\", \"start\");\r\n    buttonGoEl.setAttribute(\"radius\", \"0.15\");\r\n    buttonGoEl.setAttribute(\"material\", \"color: #32CD32\");\r\n    buttonGoEl.setAttribute(\"tags\", \"singleActionButton: true\");\r\n    buttonGoEl.setAttribute(\"css-class\", \"interactable\");\r\n    buttonGoEl.setAttribute(\"position\", {\r\n      x: this.el.object3D.position.x + (2 - 0.2),\r\n      y: this.el.object3D.position.y + 1,\r\n      z: this.el.object3D.position.z + 1 // Right\r\n    });\r\n    this.el.appendChild(buttonGoEl);\r\n\r\n    // Stop Button\r\n    const buttonStopEl = document.createElement(\"a-sphere\");\r\n    buttonStopEl.setAttribute(\"socialvr-barge-button\", \"stop\");\r\n    buttonStopEl.setAttribute(\"radius\", \"0.15\");\r\n    buttonStopEl.setAttribute(\"material\", \"color: #FF0000\");\r\n    buttonStopEl.setAttribute(\"tags\", \"singleActionButton: true\");\r\n    buttonStopEl.setAttribute(\"css-class\", \"interactable\");\r\n    buttonStopEl.setAttribute(\"position\", {\r\n      x: this.el.object3D.position.x + (2 - 0.2),\r\n      y: this.el.object3D.position.y + 1,\r\n      z: this.el.object3D.position.z - 1 // Left\r\n    });\r\n    this.el.appendChild(buttonStopEl);\r\n\r\n    const bargeSpawn = document.querySelector(\".BargeSpawn\");\r\n    if (bargeSpawn) {\r\n      this.el.setAttribute(\"position\", bargeSpawn.getAttribute(\"position\"));\r\n    }\r\n\r\n    // Client\r\n    this.el.addEventListener(\"startBargeEvent\", this.startBarge.bind(this));\r\n    this.el.addEventListener(\"stopBargeEvent\", this.stopBarge.bind(this));\r\n    this.el.addEventListener(\"resetBargeEvent\", this.resetBarge.bind(this));\r\n\r\n    // Broadcast Event\r\n    NAF.connection.subscribeToDataChannel(\"startBarge\", this._startBarge.bind(this));\r\n    NAF.connection.subscribeToDataChannel(\"stopBarge\", this._stopBarge.bind(this));\r\n    NAF.connection.subscribeToDataChannel(\"resetBarge\", this._resetBarge.bind(this));\r\n\r\n    this.system.register(this.el);\r\n  },\r\n\r\n  remove() {\r\n    this.el.removeEventListener(\"startBargeEvent\", this.startBarge.bind(this));\r\n    this.el.removeEventListener(\"stopBargeEvent\", this.stopBarge.bind(this));\r\n    this.el.removeEventListener(\"resetBargeEvent\", this.resetBarge.bind(this));\r\n\r\n    NAF.connection.unsubscribeToDataChannel(\"startBarge\");\r\n    NAF.connection.unsubscribeToDataChannel(\"stopBarge\");\r\n    NAF.connection.unsubscribeToDataChannel(\"resetBarge\");\r\n\r\n    this.el.removeObject3D(\"mesh\");\r\n    this.system.unregister();\r\n  },\r\n\r\n  tick(t, dt) {\r\n    // TODO: more elegant solution?\r\n    if (this.el.getAttribute(\"visible\")) {\r\n      this.el.play();\r\n    } else {\r\n      this.el.pause();\r\n    }\r\n\r\n    const position = this.el.object3D.position;\r\n    const bargeMinX = position.x - this.data.width / 2;\r\n    const bargeMaxX = position.x + this.data.width / 2;\r\n    const bargeMinZ = position.z - this.data.depth / 2;\r\n    const bargeMaxZ = position.z + this.data.depth / 2;\r\n\r\n    const avatar = window.APP.componentRegistry[\"player-info\"][0];\r\n    const avposition = avatar.el.getAttribute(\"position\");\r\n    const characterController = this.el.sceneEl.systems[\"hubs-systems\"].characterController;\r\n\r\n    if (this.data.moving) {\r\n      const targetPosition = positions[this.data.targetKey];\r\n      const direction = this.direction;\r\n\r\n      if (!targetPosition) {\r\n        this.data.moving = false;\r\n        return;\r\n      }\r\n\r\n      direction.copy(targetPosition).sub(position);\r\n\r\n      if (position.distanceToSquared(targetPosition) >= 1) {\r\n        const factor = this.data.speed / direction.length();\r\n\r\n        [\"x\", \"y\", \"z\"].forEach(function(axis) {\r\n          direction[axis] *= factor * (dt / 1000);\r\n        });\r\n\r\n        this.el.setAttribute(\"position\", {\r\n          x: position.x + direction.x,\r\n          y: position.y + direction.y,\r\n          z: position.z + direction.z\r\n        });\r\n\r\n        // Avatar Movement\r\n        if (\r\n          avposition.x >= bargeMinX &&\r\n          avposition.x <= bargeMaxX &&\r\n          avposition.z >= bargeMinZ &&\r\n          avposition.z <= bargeMaxZ\r\n        ) {\r\n          characterController.barge = true;\r\n\r\n          avatar.el.setAttribute(\"position\", {\r\n            x: avposition.x + direction.x,\r\n            y: position.y - this.data.height / 2 + getCurrentPlayerHeight() / 2,\r\n            z: avposition.z + direction.z\r\n          });\r\n        } else {\r\n          characterController.barge = false;\r\n        }\r\n\r\n        // Floaty Movement\r\n        const floaties = document.querySelectorAll('[floaty-object=\"\"]');\r\n\r\n        floaties.forEach((floaty) => {\r\n          const x = floaty.object3D.position.x\r\n          const y = floaty.object3D.position.y\r\n          const z = floaty.object3D.position.z\r\n\r\n          floaty.object3D.position.set(x + direction.x, y - direction.y, z + direction.z)\r\n        })\r\n\r\n        // Interactable Movement\r\n        const interactables = document.querySelectorAll('[interactable=\"\"]');\r\n\r\n        interactables.forEach((interactable) => {\r\n          const x = interactable.object3D.position.x\r\n          const y = interactable.object3D.position.y\r\n          const z = interactable.object3D.position.z\r\n\r\n          interactable.object3D.position.set(x + direction.x, y - direction.y, z + direction.z)\r\n        })\r\n      } else {\r\n        if (\r\n          avposition.x < bargeMinX &&\r\n          avposition.x > bargeMaxX &&\r\n          avposition.z < bargeMinZ &&\r\n          avposition.z > bargeMaxZ\r\n        ) {\r\n          characterController.barge = false;\r\n        }\r\n\r\n        if (isNaN(lastKeyChange) || t >= lastKeyChange) {\r\n          lastKeyChange = t + 100;\r\n          this.data.targetKey = this.data.targetKey + 1;\r\n        }\r\n\r\n        // console.log(t);\r\n        console.log(this.data.targetKey);\r\n      }\r\n    } else {\r\n      if (\r\n        avposition.x >= bargeMinX &&\r\n        avposition.x <= bargeMaxX &&\r\n        avposition.z >= bargeMinZ &&\r\n        avposition.z <= bargeMaxZ\r\n      ) {\r\n        characterController.barge = true;\r\n\r\n        // Move character\r\n        avatar.el.setAttribute(\"position\", {\r\n          x: avposition.x,\r\n          y: position.y - this.data.height / 2 + getCurrentPlayerHeight() / 2,\r\n          z: avposition.z\r\n        });\r\n      } else {\r\n        characterController.barge = false;\r\n      }\r\n    }\r\n  },\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  _startBarge(senderId, dataType, data, targetId) {\r\n    positions = [];\r\n\r\n    for (let i = 1; i < 100; i++) {\r\n      const wp = document.querySelector(\".Waypoint_\" + i);\r\n\r\n      if (wp) {\r\n        positions.push(wp.object3D.position);\r\n      }\r\n    }\r\n\r\n    if (positions.length >= 1) {\r\n      console.log(`Registered ${positions.length} waypoints for the barge.`);\r\n    } else {\r\n      console.warn(\"No waypoints found!\");\r\n      console.warn(\"Registering some default waypoints for the barge.\");\r\n\r\n      positions.push(new Vector3(8.48, 0, 0.67));\r\n      positions.push(new Vector3(8.48, 0, 14.67));\r\n      positions.push(new Vector3(-3.51, 0, 14.67));\r\n      positions.push(new Vector3(-3.51, 0, 24.67));\r\n    }\r\n\r\n    console.log(positions);\r\n    this.data.moving = true;\r\n  },\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  _stopBarge(senderId, dataType, data, targetId) {\r\n    this.data.moving = false;\r\n  },\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  _resetBarge(senderId, dataType, data, targetId) {\r\n    const avatar = window.APP.componentRegistry[\"player-info\"][0];\r\n    const avposition = avatar.el.getAttribute(\"position\");\r\n    const bargeMinX = this.el.object3D.position.x - this.data.width / 2;\r\n    const bargeMaxX = this.el.object3D.position.x + this.data.width / 2;\r\n    const bargeMinZ = this.el.object3D.position.z - this.data.depth / 2;\r\n    const bargeMaxZ = this.el.object3D.position.z + this.data.depth / 2;\r\n\r\n    this.data.targetKey = 0;\r\n    this.data.moving = false;\r\n    this.el.setAttribute(\"position\", { x: 0, y: 0, z: 0 });\r\n    if (\r\n      avposition.x >= bargeMinX &&\r\n      avposition.x <= bargeMaxX &&\r\n      avposition.z >= bargeMinZ &&\r\n      avposition.z <= bargeMaxZ\r\n    ) {\r\n      avatar.el.setAttribute(\"position\", { x: 0, y: 0, z: 0 });\r\n    }\r\n  },\r\n\r\n  startBarge() {\r\n    this._startBarge(null, null, {});\r\n    NAF.connection.broadcastData(\"startBarge\", {});\r\n  },\r\n\r\n  stopBarge() {\r\n    this._stopBarge(null, null, {});\r\n    NAF.connection.broadcastData(\"stopBarge\", {});\r\n  },\r\n\r\n  resetBarge() {\r\n    this._resetBarge(null, null, {});\r\n    NAF.connection.broadcastData(\"resetBarge\", {});\r\n  }\r\n});\r\n","// responsible for barge creation and advancing phase\r\n\r\nAFRAME.registerSystem(\"socialvr-barge\", {\r\n  init: function() {\r\n    console.log(\"[Social VR] Barge System - Initialized\")\r\n    \r\n    this.barge = null;\r\n  },\r\n\r\n  register: function(el) {\r\n    if (this.barge != null) {\r\n      this.el.removeChild(this.barge);\r\n    }\r\n    this.barge = el;\r\n  },\r\n\r\n  unregister: function() {\r\n    this.barge = null;\r\n  },\r\n});\r\n\r\nexport function CreateBarge() {\r\n  // Barge: invisible, paused\r\n  const barge =  document.createElement(\"a-entity\");\r\n  barge.setAttribute(\"socialvr-barge\", \"\");\r\n  barge.setAttribute(\"visible\", false);\r\n  \r\n  // toolbox button\r\n  const bargeToolboxButton = document.createElement(\"a-sphere\");\r\n  bargeToolboxButton.setAttribute(\"socailvr-toolbox-button\", \"Barge\");\r\n  bargeToolboxButton.setAttribute(\"radius\", \"0.3\");\r\n  bargeToolboxButton.setAttribute(\"material\", \"color: pink\");\r\n  bargeToolboxButton.setAttribute(\"tags\", \"singleActionButton: true\");\r\n  bargeToolboxButton.setAttribute(\"css-class\", \"interactable\");\r\n  bargeToolboxButton.setAttribute(\"position\", {\r\n    x: 5,\r\n    y: 2,\r\n    z: 3\r\n  });\r\n  \r\n  // hide phase 1 objects\r\n  TogglePhase1(false);\r\n\r\n  // Client\r\n  barge.addEventListener(\"advancePhaseEvent\", function() {\r\n    TogglePhase1(true);\r\n    NAF.connection.broadcastData(\"advancePhase\", {});\r\n  });\r\n  // Broadcast Event\r\n  NAF.connection.subscribeToDataChannel(\"advancePhase\", TogglePhase1(true));  // TODO: arrow function?\r\n\r\n  return [barge, bargeToolboxButton];\r\n}\r\n\r\n// toggle: true/false\r\nfunction TogglePhase1(toggle) {\r\n  \r\n  // TODO: add phase index parameter\r\n\r\n  console.log(\"[Social VR] Barge - Phase Initialized\");\r\n\r\n  const phase1 = document.querySelector(\".phase-1\");\r\n\r\n  if (phase1) {\r\n    console.log(\"[Social VR] Barge - Phase 1 Found\");\r\n\r\n    phase1.children.forEach(child => {\r\n      child.setAttribute(\"visible\", toggle);\r\n    });\r\n  } else {\r\n    console.warn(\"[Social VR] Barge - Phase 1 Not Found\");\r\n  }\r\n}\r\n","//import \"./systems/sound-effects-system\";\r\n\r\nAFRAME.registerComponent(\"socialvr-barge-button\", {\r\n  dependencies: [\"is-remote-hover-target\", \"hoverable-visuals\"],\r\n  \r\n  // start, stop, reset\r\n  schema: {type: \"string\", default: \"start\"},\r\n\r\n  init: function() {\r\n    // button text\r\n    const textEl = document.createElement(\"a-entity\");\r\n    textEl.setAttribute(\"text\", `value: ${this.data.toUpperCase()}; align: center;`);\r\n    textEl.setAttribute(\"rotation\", \"0 270 0\");\r\n    textEl.setAttribute(\"position\", \"0 0.2 0\");\r\n    this.el.appendChild(textEl);\r\n    \r\n    this.onClick = this.onClick.bind(this);\r\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\r\n  },\r\n\r\n  remove: function() {\r\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\r\n  },\r\n\r\n  onClick: function() {\r\n    this.el.emit(`${this.data}BargeEvent`);\r\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\r\n      SOUND_SNAP_ROTATE,\r\n      this.el.object3D\r\n    );\r\n  }\r\n});","import \"./components/toolbox-button\";\r\nimport \"./components/barge\";\r\nimport \"./components/barge-button\";\r\n\r\nimport \"./systems/barge\";\r\nimport { CreateBarge } from \"./systems/barge\";\r\n\r\nconst scene = document.querySelector(\"a-scene\");\r\n\r\nconsole.log(\"[Social VR] Barge - Create Barge\");\r\nconst [barge, bargeToolboxButton] = CreateBarge();\r\nscene.appendChild(barge);\r\nscene.appendChild(bargeToolboxButton);\r\n\r\nwindow.startPhaseTesting = function() {\r\n  let phase = 1;\r\n  barge.emit(\"advancePhaseEvent\");\r\n  console.log(`[Social VR] Barge - Current Phase: ${phase}`);\r\n};\r\n"],"names":["AFRAME","registerComponent","dependencies","schema","type","default","init","textEl","document","createElement","setAttribute","this","data","toUpperCase","el","appendChild","onClick","bind","object3D","addEventListener","barge","sceneEl","systems","NAF","connection","subscribeToDataChannel","createBarge","removeBarge","remove","removeEventListener","unsubscribeToDataChannel","soundEffectsSystem","playPositionalSoundFollowing","SOUND_SNAP_ROTATE","getAttribute","broadcastData","console","log","play","emit","pause","positions","lastKeyChange","TogglePhase1","toggle","phase1","querySelector","children","forEach","child","warn","width","height","depth","speed","moving","targetKey","direction","THREE","Vector3","mesh","setObject3D","matrixNeedsUpdate","buttonResetEl","x","position","y","z","buttonGoEl","buttonStopEl","bargeSpawn","startBarge","stopBarge","resetBarge","_startBarge","_stopBarge","_resetBarge","system","register","removeObject3D","unregister","tick","t","dt","bargeMinX","bargeMaxX","bargeMinZ","bargeMaxZ","avatar","window","APP","componentRegistry","avposition","characterController","targetPosition","copy","sub","distanceToSquared","factor","length","axis","getCurrentPlayerHeight","querySelectorAll","floaty","set","interactable","isNaN","senderId","dataType","targetId","i","wp","push","registerSystem","removeChild","scene","bargeToolboxButton","CreateBarge","startPhaseTesting"],"mappings":"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"}